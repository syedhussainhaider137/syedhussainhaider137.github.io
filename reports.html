<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Reports – Syed Hussain Haider</title>

<!-- === same design tokens as index.html === -->
<style>
:root {
  --bg-color: #ffffff;
  --text-color: #1f2937;
  --primary-color: #6366f1;
  --card-bg: #f9fafb;
  --card-shadow: rgba(0,0,0,0.05);
}
body.dark {
  --bg-color: #0f172a;
  --text-color: #f1f5f9;
  --primary-color: #818cf8;
  --card-bg: #1e293b;
  --card-shadow: rgba(255,255,255,0.1);
}
* { box-sizing: border-box; }
body {
  margin: 0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  background-color: var(--bg-color);
  color: var(--text-color);
  transition: background-color 0.3s, color 0.3s;
}

/* Navbar (identical to index.html) */
.navbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 1rem 1.5rem;
  background: var(--card-bg);
  box-shadow: 0 2px 4px var(--card-shadow);
}
.navbar .logo {
  font-size: 1.25rem;
  font-weight: bold;
}
.navbar .nav-links {
  list-style: none;
  display: flex;
  gap: 1.5rem;
  margin: 0;
}
.navbar .nav-links a {
  text-decoration: none;
  color: var(--text-color);
  font-weight: 500;
  transition: color 0.2s;
}
.navbar .nav-links a:hover {
  color: var(--primary-color);
}
.toggle-theme {
  background: var(--primary-color);
  border: none;
  color: #fff;
  padding: 0.5rem 1rem;
  border-radius: 5px;
  cursor: pointer;
}

/* Page header to mirror homepage spacing */
.hero {
  text-align: left;
  max-width: 960px;
  margin: 0 auto;
  padding: 2rem 1rem 1rem;
}
.hero h1 {
  font-size: 2rem;
  margin: 0 0 .35rem 0;
}
.hero p { margin: 0; opacity: .9; }

/* Controls (search/sort) styled like cards */
.controls {
  display: flex;
  gap: 0.75rem;
  flex-wrap: wrap;
  max-width: 960px;
  margin: 0 auto;
  padding: 0 1rem 1rem;
}
.controls input,
.controls select {
  background: var(--card-bg);
  border: 1px solid rgba(0,0,0,0.1);
  color: var(--text-color);
  padding: 0.6rem 0.8rem;
  border-radius: 8px;
  min-width: 220px;
  outline: none;
}

/* Cards grid (use homepage card look) */
.sections {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 1.5rem;
  max-width: 960px;
  margin: 0 auto;
  padding: 1rem;
}
.card {
  background: var(--card-bg);
  border-radius: 10px;
  padding: 1.2rem;
  box-shadow: 0 2px 4px var(--card-shadow);
  transition: transform 0.2s, box-shadow 0.2s;
}
.card:hover {
  transform: translateY(-5px);
  box-shadow: 0 4px 8px var(--card-shadow);
}
.card h3 {
  margin-top: 0;
  margin-bottom: 0.4rem;
  color: var(--primary-color);
}
.card p { margin: 0 0 .4rem 0; line-height: 1.45; }
.card .muted { opacity: .8; font-size: .95rem; }
.btn { display: inline-block; margin-top: .4rem; text-decoration: none; color: var(--primary-color); }
.empty { grid-column: 1 / -1; text-align: center; opacity: .8; }
</style>

<!-- same theme behaviour as index.html -->
<script>
function toggleTheme() {
  document.body.classList.toggle('dark');
  localStorage.setItem('theme', document.body.classList.contains('dark') ? 'dark' : 'light');
}
document.addEventListener('DOMContentLoaded', () => {
  const saved = localStorage.getItem('theme');
  if (saved === 'dark') document.body.classList.add('dark');
});
</script>
</head>
<body>

<!-- Navbar identical to homepage -->
<nav class="navbar">
  <div class="logo">Syed Hussain Haider</div>
  <ul class="nav-links">
    <li><a href="index.html">Home</a></li>
    <li><a href="projects.html">Projects</a></li>
    <li><a href="reports.html"><strong>Reports</strong></a></li>
    <li><a href="journal.html">Journal</a></li>
    <li><a href="cv.html">CV</a></li>
  </ul>
  <button class="toggle-theme" onclick="toggleTheme()">Toggle Theme</button>
</nav>

<!-- Page header -->
<header class="hero">
  <h1>Reports</h1>
  <p>Deeper dives and write-ups. Use search or sort to find what you need.</p>
</header>

<!-- Filters -->
<div class="controls">
  <input id="search" type="search" placeholder="Search title or summary…">
  <select id="sort">
    <option value="newest">Newest first</option>
    <option value="oldest">Oldest first</option>
  </select>
</div>

<!-- Grid -->
<section class="sections" id="reports-grid">
  <div class="empty">Loading reports…</div>
</section>

<!-- Data loader (kept the same logic) -->
<script>
(async function(){
  const GRID  = document.getElementById('reports-grid');
  const SRC   = 'reports/reports.json';
  let entries = [];

  async function fetchEntries(){
    const res = await fetch(SRC, { cache: 'no-store' });
    if (!res.ok) throw new Error('Failed to fetch reports.json');
    return res.json();
  }

  function render(list){
    GRID.innerHTML = '';
    if (!list.length){
      GRID.innerHTML = '<div class="empty">No reports yet. Add PDFs in <code>/reports/</code> and an item in <code>reports/reports.json</code>.</div>';
      return;
    }
    for (const it of list){
      const card = document.createElement('article');
      card.className = 'card';
      const dateStr = new Date(it.date).toLocaleDateString();
      card.innerHTML = `
        <h3>${it.title}</h3>
        <p class="muted">${dateStr}</p>
        <p>${it.summary}</p>
        <a class="btn" href="reports/viewer.html?pdf=${encodeURIComponent('reports/' + it.pdf)}&title=${encodeURIComponent(it.title)}">Read Report →</a>
      `;
      GRID.appendChild(card);
    }
  }

  function applyFilters(){
    const q = document.getElementById('search').value.toLowerCase().trim();
    const mode = document.getElementById('sort').value;
    let list = [...entries];

    list.sort((a,b) => new Date(a.date) - new Date(b.date));
    if (mode === 'newest') list.reverse();

    if (q){
      list = list.filter(it =>
        (it.title || '').toLowerCase().includes(q) ||
        (it.summary || '').toLowerCase().includes(q)
      );
    }
    render(list);
  }

  try {
    entries = await fetchEntries();
    entries = entries.map(e => ({
      title: e.title || 'Untitled',
      date:  e.date  || '1970-01-01',
      summary: e.summary || '',
      pdf:   e.pdf   || ''
    }));
    entries.sort((a,b) => new Date(b.date) - new Date(a.date));
    render(entries);
  } catch (err){
    console.error(err);
    GRID.innerHTML = '<div class="empty">Could not load <code>reports/reports.json</code>. Check the path and JSON syntax.</div>';
  }

  document.getElementById('search').addEventListener('input', applyFilters);
  document.getElementById('sort').addEventListener('change', applyFilters);
})();
</script>

</body>
</html>
